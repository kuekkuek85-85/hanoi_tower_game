# PRD.md

# 하노이타워 게임 웹사이트 (중학교 수업용) – 제품 요구사항 명세서

## 1. 목적
- 학생들이 **하노이의 탑** 원리를 직관적으로 이해하고, 문제 해결 전략(분할정복, 재귀적 사고)을 체험하도록 돕는다.
- 각자 플레이한 기록을 **명예의 전당(리더보드)**에 저장해 성취감을 제공하고 수업 참여도를 높인다.

## 2. 핵심 사용자
- **학생(플레이어)**: 게임 진행, 본인 기록 저장 및 확인

## 3. 주요 기능 (Must-have)
1) **게임 설정**
   - 시작 화면에서 **원판 개수 3~10** 사이 선택(슬라이더/스텝퍼).
   - 입력창에 **“학번(5자리 숫자) + 공백 + 성명”** 형식 입력(예: `10101 홍길동`).
   - 시작 버튼 클릭 시 게임 보드 진입.
2) **게임 플레이**
   - **3개의 기둥**(A/B/C).
   - **마우스 드래그 앤 드롭** / **터치 드래그 앤 드롭** 지원.
   - 규칙: 더 큰 원판은 더 작은 원판 위에 놓을 수 없음(불가 시 흔들림/진동 애니메이션 + 음效).
   - **이동 1회마다 효과음** 재생(놓기 성공 시).
   - **이동 횟수 자동 집계**(최소 이동 횟수 = 2^n - 1 표시).
3) **기록 저장(명예의 전당)**
   - 완료 시 또는 플레이 중 **저장 버튼** 제공.
   - 저장 항목: 학번, 성명, **원판 개수**, **총 이동 횟수**, 플레이 시간(초), 저장 시각.
   - 동일 학번/이름으로 여러 기록 가능.
4) **명예의 전당(리더보드)**
   - 기본 정렬: **원판 개수별 최저 이동 횟수 → 동일 시 더 빠른 시간**.
   - 필터: 원판 개수(3~10), 검색: 학번/이름 포함 검색.
   - 상위 10개 우선 노출, “전체 보기”로 확장.
5) **반응형 UI & 접근성**
   - PC/태블릿/모바일 지원.
   - 색 대비, 키보드 접근(선택 이동 모드 보조), 스크린리더 라벨 제공.

## 4. 부가 기능 (Nice-to-have)
- **재시작/되돌리기(Undo 1-step)** 버튼.

## 5. 성공 지표 (KPI)
- 수업 시간 내(10분) **완료 기록 제출 학생 비율 ≥ 80%**.
- 리더보드에 **중복 없이 20명 이상** 기록 저장.
- 평균 페이지 로드 ≤ 2.0s(재방문 캐시 기준).

## 6. 제약/가정
- 배포: **Replit**.
- DB: **Supabase**.
- 로그인 불요(학생 식별은 “학번 성명” 입력으로 대체).

## 7. 레이아웃(마크다운 와이어프레임)

### 7.1 시작 화면
```
+-------------------------------------------------------+
| [타이틀] 하노이타워 (수업용)                           |
|                                                       |
|  [입력] 학번 성명  (예: 10101 홍길동)                |
|  [선택] 원판 개수: [ 3 ▾ ] (3~10)                     |
|                                                       |
|  (i) 최소 이동 횟수는 2^n - 1 입니다.                 |
|                                                       |
|            [ 게임 시작 ]   [ 명예의 전당 바로가기 ]   |
+-------------------------------------------------------+
```

### 7.2 게임 화면
```
+-------------------------------------------------------+
| 하노이타워 (n=5)     학번 성명: 10101 홍길동          |
| 이동: 12회   최소: 31회   경과시간: 00:01:23          |
| [되돌리기] [재시작] [저장] [명예의 전당]              |
|                                                       |
|     |           |           |                         |
|    ---         ---         ---                        |
|   -----       -----       -----   ← 3개의 기둥        |
|  -------     -------     -------  (DND로 이동)        |
| ---------   ---------   ---------                     |
|-------------------------------------------------------|
|  * 작은 원판 위에 큰 원판을 놓을 수 없습니다.         |
+-------------------------------------------------------+
```

### 7.3 명예의 전당 화면
```
+-------------------------------------------------------+
| [명예의 전당]                                         |
| 필터: 원판 개수 [전체 ▾]  검색: [ 학번/이름 ] (검색)  |
|                                                       |
| 순위 | 학번  | 이름   | 원판 | 이동 | 시간(초) | 저장시각 |
| ---- | ----- | ------ | ---- | ---- | -------- | -------- |
| 1    | 10101 | 홍길동 | 5    | 31   | 95       | 09:12:10 |
| 2    | 10103 | 이몽룡 | 5    | 31   | 110      | 09:14:21 |
| ...                                                    |
|                        [전체 보기]                    |
+-------------------------------------------------------+
```

## 8. 데이터 구조(개요)
- 테이블: `hanoi_records`
  - id (uuid)
  - student_id (text, 5자리 숫자)
  - student_name (text)
  - disks (int, 3~10)
  - moves (int)
  - seconds (int)
  - created_at (timestamptz, default now)

## 9. 품질/보안/NFR
- **성능**: 10,000건 이하 조회 시 200ms 내 필터/검색.
- **무결성**: 입력 정규식 검증(`^\d{5}\s[가-힣A-Za-z]+$`).
- **보안**: 클라이언트는 **anon key**만 사용, RLS로 **insert/select 제한**.
- **프라이버시**: 학번/이름 외 개인정보 수집 금지, 로그 최소화.

## 10. 일정(제안)
- v0.1 (핵심 게임) 1일
- v0.2 (리더보드 저장/조회) 1일
- v0.3 (검색/필터/Undo) 0.5~1일
